{% extends "layout.html" %}

{% block title %}
    Tutuuu
{% endblock %}

{% block main %}
    <header style="text-align: center;">
        <span class="dank">Zakaz brapowania frajerze</span>
    </header>
    <div style="text-align: center;">
        <form>
            <select id="timeSelect">
                <option selected disabled value="0">Select time</option>
                <option value="10">10 sec</option>
                <option value="20">20 sec</option>
                <option value="30">30 sec</option>
                <option value="60">1 min</option>
            </select>
        </form>
        <div>
            <button type="button" onclick="startChallenge()">Begin</button>
        </div>    
    </div>
    <div class="container" style="text-align: center;">
        <div id="challengeText"></div>
        <input type="text" id="userInput" placeholder="Type your text here">
    </div>
    <div style="text-align: center;">
        <p>Time left: <span id="timer"></span></p>
    </div>
    <script src="/static/makeWordList.js"></script>
    <script src="/static/displayer.js"></script>
    <script src="/static/timer.js"></script>
    <script>
        function startChallenge() {
        const timeSelect = document.getElementById("timeSelect");
        if (timeSelect.value === "0") {
        alert("No time has been selected");
        } else {
        const timeValue = parseInt(timeSelect.value, 10);
        const challengeText = makeList();
        document.getElementById("challengeText").textContent = challengeText;
        document.getElementById("userInput").focus();
        startTimer(timeValue);
        }
    }

        document.getElementById("userInput").addEventListener("input", function() {
            const userInput = document.getElementById("userInput").value;
            updateChallengeText(userInput);

            if (userInput === challengeText) {
                // Handle completion of challenge
                alert("Challenge completed!");
            }
        });
    </script>
{% endblock %}